{"version":3,"sources":["../src/index.js"],"names":["SessionServer","require","ChannelServer","logger","sessionServer","sessionConf","host","port","init","err","error","listen"],"mappings":";;AAEA,IAAIA,aAAa,GAAGC,OAAO,CAAC,gDAAD,CAAP,CAA0DD,aAA9E;AACA,IAAIE,aAAa,GAAGD,OAAO,CAAC,gDAAD,CAAP,CAA0DC,aAA9E;;AAEA,IAAMC,MAAM,GAAGF,OAAO,CAAC,kBAAD,CAAP,CAA4BE,MAA3C;;AAEA,IAAIC,aAAa,GAAE,IAAIJ,aAAJ,EAAnB;;AAEA,IAAIK,WAAW,GAAE;;AAEb,UAAQ,IAFK;AAGb,eAAa,gBAHA;AAIb,WAAS;AACLC,IAAAA,IAAI,EAAC,WADA;AAELC,IAAAA,IAAI,EAAC,MAFA,EAJI,EAAjB;;;;;AAWAH,aAAa,CAACI,IAAd,CAAmBH,WAAnB,EAA+B,UAACI,GAAD,EAAO;;AAElC,MAAGA,GAAH,EAAO;;AAEHN,IAAAA,MAAM,CAACO,KAAP,CAAa,mCAAkCD,GAA/C;;AAEA;;;AAGH,GAPD,MAOK;;AAEDL,IAAAA,aAAa,CAACO,MAAd,CAAqB,UAACF,GAAD,EAAO;;AAExB,UAAGA,GAAH,EAAO;AACCN,QAAAA,MAAM,CAACO,KAAP,CAAa,oCAAmCD,GAAhD;AACP;;AAED;;AAEH,KARD;AASH;;AAEJ,CAtBD;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA","sourcesContent":["\r\n\r\nvar SessionServer = require('./backend/server/session-server/session-server').SessionServer\r\nvar ChannelServer = require('./backend/server/channel-server/channel-server').ChannelServer\r\n\r\nconst logger = require('./backend/logger').logger\r\n\r\nvar sessionServer =new SessionServer()\r\n\r\nvar sessionConf ={\r\n  \r\n    \"port\": 8080,\r\n    \"zookeeper\": \"127.0.0.1:2181\",\r\n    \"redis\": {\r\n        host:\"127.0.0.1\",\r\n        port:\"6379\"\r\n    },\r\n}\r\n\r\n\r\nsessionServer.init(sessionConf,(err)=>{\r\n\r\n    if(err){\r\n\r\n        logger.error(\"fail init session server err: \"+ err)\r\n\r\n        //TODO: process kill\r\n      \r\n    \r\n    }else{\r\n\r\n        sessionServer.listen((err)=>{\r\n\r\n            if(err){\r\n                    logger.error(\"fail listen sessionServer err: \"+ err  )\r\n            }\r\n\r\n            return\r\n            \r\n        })\r\n    }\r\n\r\n})\r\n\r\n// var wsPort = 9000;\r\n// var WebSocketServer = require('ws').Server; \r\n// var wss = new WebSocketServer(\r\n//     {\r\n//         port: wsPort,\r\n//         // server:server\r\n//     }\r\n    \r\n// ); \r\n\r\n// var SignalingServer = require('./backend/server/signaling-server/signaling-server').SignalingServer\r\n// var signalingServer = new SignalingServer()\r\n\r\n// signalingServer.init(wss,(err)=>{\r\n\r\n//     if(err){\r\n//         console.error(\"fail channel server init err: \"+ err.toString())\r\n//         return\r\n//     }\r\n\r\n//     var ChannelServer = require('./backend/server/channel-server/channel-server').ChannelServer\r\n//     var channelserver =new ChannelServer()\r\n\r\n//     var channelConf={\r\n//         \"redis\": {\r\n//             host:\"127.0.0.1\", \r\n//             port:\"6379\",\r\n//             // password:\"0000\",\r\n//         },\r\n//         \"zookeeper\": \"127.0.0.1:2181\",\r\n//         \"host\": \"127.0.0.1\",\r\n//         \"port\": wsPort,\r\n//         \"ssl\": false,\r\n//         \"serverName\":\"testServer\"\r\n//     }\r\n\r\n//     channelserver.init(channelConf,signalingServer,(err)=>{\r\n\r\n//         if(err){\r\n//             logger.error('channel server init failed err:',err.toString())\r\n//         }\r\n\r\n//     });\r\n  \r\n// })\r\n\r\n"],"file":"index.js"}